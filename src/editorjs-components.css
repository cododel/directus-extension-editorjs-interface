/* General components re-style */

.codex-editor .cdx-attaches,
.codex-editor .cdx-personality {
	color: var(--theme--foreground);
	background: var(--theme--background-normal);
	border-color: var(--theme--border-color);
	box-shadow: unset;
}

/* Paragraph */

.codex-editor .ce-paragraph {
	padding: 0;
	line-height: inherit;
}
.codex-editor .ce-paragraph[data-placeholder]:empty::before {
	color: var(--theme--foreground-subdued);
}

/* Quote block */

.codex-editor .cdx-block.cdx-quote {
	padding-left: 22px;
}

.codex-editor .cdx-quote-nested {
	display: grid;
	grid-template-columns: minmax(80px, 120px) 1fr;
	gap: 16px;
	padding: 16px;
	margin: 16px 0;
	color: var(--theme--foreground);
	background-color: var(--theme--background-normal);
	border: var(--theme--border-width) solid var(--theme--border-color);
	border-left-width: 4px;
	border-radius: var(--theme--border-radius);
}

.codex-editor .cdx-quote-nested__image {
	position: relative;
	display: flex;
	flex-direction: column;
}

.codex-editor .cdx-quote-nested__image-area {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 100%;
	min-height: 220px;
	padding: 12px;
	text-align: center;
	color: var(--theme--foreground-subdued);
	background-color: var(--theme--background-subdued);
	background-size: cover;
	background-position: center;
	background-repeat: no-repeat;
	border: 2px dashed var(--theme--border-color);
	border-radius: var(--theme--border-radius);
	cursor: pointer;
	transition: border-color 0.2s ease, color 0.2s ease;
}

.codex-editor .cdx-quote-nested__image-icon {
	display: block;
	font-size: 2rem;
	line-height: 1;
}
.codex-editor .cdx-quote-nested__image-icon-hidden {
	opacity: 0;
	visibility: hidden;
}

.codex-editor .cdx-quote-nested [data-icon] {
  display: flex;
  align-items: center;
  justify-content: center;
}

.codex-editor .cdx-quote-nested [data-icon]::after {
	content: attr(data-icon);
	font-family: 'Material Symbols';
  font-weight: 400;
  font-style: normal;
  line-height: 1;
  letter-spacing: normal;
  text-transform: none;
  white-space: nowrap;
  direction: ltr;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  font-feature-settings: 'liga';
  font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
	font-weight: 400;
	font-style: normal;
	line-height: 1;
	letter-spacing: normal;
	text-transform: none;
	white-space: nowrap;
	direction: ltr;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
	text-rendering: optimizeLegibility;
	font-feature-settings: 'liga';
	font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
}

.codex-editor .cdx-quote-nested__image-area:hover {
	border-color: var(--theme--primary);
	color: var(--theme--foreground);
}

.codex-editor .cdx-quote-nested__image-area--filled {
	border-style: solid;
}

.codex-editor .cdx-quote-nested__image-area--disabled {
	cursor: not-allowed;
}

.codex-editor .cdx-quote-nested__image-text {
	pointer-events: none;
	font-size: 0.9em;
}

.codex-editor .cdx-quote-nested__image-remove {
	position: absolute;
	top: 8px;
	right: 8px;
	padding: 3px;
	font-size: 0.8em;
	color: var(--theme--foreground);
	background: var(--theme--background-accent);
	border: var(--theme--border-width) solid transparent;
	border-radius: var(--theme--border-radius);
	cursor: pointer;
}

.codex-editor .cdx-quote-nested__image-remove[disabled] {
	display: none;
}

.codex-editor .cdx-quote-nested__content {
	display: flex;
	flex-direction: column;
	gap: 12px;
}

.codex-editor .cdx-quote-nested__editor {
  border: var(--theme--border-width) solid var(--theme--border-color-accent);
  border-radius: var(--theme--border-radius);
	min-height: 100%;
}


/* Image Tool */

.codex-editor .image-tool {
	--bg-color: var(--theme--background-accent);
	--front-color: var(--theme--primary);
	--border-color: var(--theme--border-color);
}

/* Personality */

.codex-editor .cdx-personality__description {
	font-weight: unset;
	font-size: 0.9em;
	font-style: oblique;
}

.codex-editor .cdx-personality .cdx-personality__photo {
	background-color: transparent;
}

.codex-editor .cdx-personality__link {
	color: var(--theme--primary);
	font-size: 0.72em;
}

/* Checklist */

.codex-editor .cdx-checklist__item-checkbox {
	background: transparent;
	border-color: var(--theme--border-color);
	border-width: var(--theme--border-width);
	border-radius: 4px;
}

.codex-editor .cdx-checklist__item-text {
	padding: 3px 0;
}

.codex-editor .cdx-checklist__item--checked .cdx-checklist__item-checkbox {
	background: var(--theme--primary);
	border-color: var(--theme--primary);
}

.codex-editor .cdx-checklist__item--checked .cdx-checklist__item-checkbox::after {
	top: 4px;
	left: 3px;
}

/* Lists */

.codex-editor .ce-block ul,
.codex-editor .ce-block ol {
	font-size: inherit !important;
}

/* Attaches */

.cdx-attaches--with-file .cdx-attaches__file-icon {
	padding: 5px;
	background: var(--theme--background-accent);
	border-radius: var(--theme--border-radius);
}

.codex-editor .cdx-attaches--with-file .cdx-attaches__title {
	color: var(--theme--foreground);
}

.codex-editor .cdx-attaches__size {
	color: var(--theme--foreground-subdued);
}

.cdx-attaches--with-file .cdx-attaches__download-button svg {
	fill: var(--v-button-background-color);
}

.codex-editor .cdx-attaches--with-file .cdx-attaches__file-icon::before {
	background: transparent;
}

/* InlineCode */

.codex-editor .ce-block .inline-code {
	padding: 4px;
	color: var(--v-chip-background-color);
	font-family: monospace;
	background-color: var(--v-chip-color);
	border-radius: 4px;
}

/* Warning */
.codex-editor .cdx-warning::before {
	right: -30px;
	left: unset;
}

/* Marker */

.codex-editor .cdx-marker {
	color: var(--theme--warning-background);
	background: var(--theme--warning-background);
	outline: 2px solid var(--theme--warning-background);
}

/* tc module */

.codex-editor .tc-wrap {
	--color-background: var(--v-list-item-color-hover);
	--color-border: var(--theme--border-color);
	--color-background-hover: var(--v-list-item-background-color-hover);
}

.codex-editor .tc-popover {
	--color-background: var(--theme--background-normal);
	--color-border: var(--theme--background-normal);
	--color-background-hover: var(--theme--background-accent);
}

.tc-cell--selected,
.tc-cell--selected::after,
.tc-row--selected,
.tc-row--selected::after {
	background: var(--theme--background-accent);
}

.tc-toolbox {
	--toggler-dots-color: var(--foreground-normal);
	--toggler-dots-color-hovered: var(--theme--foreground);
}

.tc-toolbox__toggler:hover {
	fill: var(--theme--background-accent) !important;
}

.codex-editor .tc-toolbox__toggler svg rect:first-child {
	/* This is very ugly, but there no other way to set background of the element */
	fill: var(--theme--background-normal) !important;
	border-radius: var(--theme--border-radius);
}

.codex-editor .tc-toolbox__toggler:hover svg rect:first-child {
	/* This is very ugly, but there no other way to set background of the element */
	fill: var(--theme--background-accent) !important;
}

.tc-add-column:hover,
.tc-add-row:hover {
	background-color: var(--theme--primary-accent);
}

.tc-add-row:hover::before {
	background-color: var(--v-list-item-background-color-hover);
}
